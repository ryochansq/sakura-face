(this["webpackJsonpsakura-face-front"]=this["webpackJsonpsakura-face-front"]||[]).push([[0],{52:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(14),i=n.n(r),s=(n(52),n(96)),o=n(106),j=n(46),u=n(100),d=n(101),l=n(102),b=n(79),h=n(103),p=n(80),f=n(98),x=n(104),m=n(12),O=n.n(m),g=n(16),v=n(13),w=n(99),y=n(105),k=n(26),N=n.n(k);N.a.defaults.baseURL="https://jzzezp7bhc.execute-api.ap-northeast-1.amazonaws.com/dev/";var S=function(){var e=Object(g.a)(O.a.mark((function e(t){var n,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={"content-type":"application/octet-stream"},e.next=3,N.a.post("/detect",t,{headers:n});case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("/findSimilar",{faceId:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=n(2),I=Object(s.a)((function(){return Object(o.a)({tweet:{color:"white",fontWeight:700,textTransform:"none"}})})),R=function(e){var t=e.students,n=I();return Object(F.jsx)(y.a,{className:n.tweet,variant:"contained",color:"secondary",onClick:function(){var e=t.reduce((function(e,t){return"".concat(e).concat(t.name," ... \u305d\u3063\u304f\u308a\u5ea6 ").concat((100*t.confidence).toFixed(1),"%\n")}),""),n="\u3055\u304f\u3089\u5b66\u9662\u9854\u8a3a\u65ad\u3067\u8ab0\u306b\u4f3c\u3066\u308b\u304b\u8a3a\u65ad\u3057\u307e\u3057\u305f\uff01\n\n".concat(e,"\nryochansq.github.io/sakura-face/\n\n#\u3055\u304f\u3089\u5b66\u9662 #\u3055\u304f\u3089\u5b66\u9662\u9854\u8a3a\u65ad\n#\u3055\u304f\u3089\u5b66\u9662\u7236\u5144\u30d1\u30bd\u30b3\u30f3\u90e8"),c=encodeURIComponent(n),a="https://twitter.com/intent/tweet?text=".concat(c);window.open(a)},children:"Twitter\u3067\u5171\u6709"})},z=Object(s.a)((function(){return Object(o.a)({pictureContainer:{width:"100%",position:"relative"},loaded:{width:"100%",height:"100%",objectFit:"contain"},rightGrid:{aspectRatio:"500 / 634"},studentPicture:{width:"100%",height:"100%",objectFit:"contain"},message:{fontWeight:700,whiteSpace:"pre-line"},tweet:{color:"white",fontWeight:700,textTransform:"none"}})})),_=function(){var e=z(),t=Object(c.useState)(void 0),n=Object(v.a)(t,2),a=n[0],r=n[1],i=Object(c.useRef)(null),s=Object(c.useState)([]),o=Object(v.a)(s,2),j=o[0],u=o[1],d=Object(c.useState)([]),l=Object(v.a)(d,2),h=l[0],p=l[1],x=Object(c.useState)(!1),m=Object(v.a)(x,2),k=m[0],N=m[1],I=Object(c.useState)(-1),_=Object(v.a)(I,2),W=_[0],G=_[1],T="\u5224\u5b9a\u3057\u305f\u3044\u9854\u3092\n\u30bf\u30c3\u30d7\u3057\u3066\u304f\u3060\u3055\u3044",U="\u9854\u304c\u691c\u51fa\u3055\u308c\u307e\u305b\u3093\u3067\u3057\u305f\u3001\u5225\u306e\u753b\u50cf\u3092\u304a\u8a66\u3057\u304f\u3060\u3055\u3044",J="\u753b\u50cf\u306e\u51e6\u7406\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3001\u5225\u306e\u753b\u50cf\u3092\u304a\u8a66\u3057\u304f\u3060\u3055\u3044",L="\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3001\u6642\u9593\u3092\u304a\u3044\u3066\u518d\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044",M=Object(c.useState)(T),P=Object(v.a)(M,2),q=P[0],A=P[1],B=function(e,t){var n=i.current?100/i.current.naturalWidth:0,c=i.current?100/i.current.naturalHeight:0,a=["left","width"].some((function(e){return e===t}))?n:c,r=["left","top"].some((function(e){return e===t}))?-2:4;return"calc(".concat(e.faceRectangle[t]*a,"% + ").concat(r,"px)")},D=function(){var e=Object(g.a)(O.a.mark((function e(t,n){var c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(n),N(!0),p([]),e.prev=3,e.next=6,C(t);case 6:c=e.sent,p(c),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),A(L);case 13:N(!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})));return function(t,n){return e.apply(this,arguments)}}(),E=function(){var e=Object(g.a)(O.a.mark((function e(t){var n,c,a,i,s,o,j;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.target,c=n.files,a=c&&c.length?c[0]:null){e.next=5;break}return e.abrupt("return");case 5:if(N(!0),u([]),p([]),G(-1),(i=new FileReader).readAsDataURL(a),i.onload=function(){var e=i.result;r(e)},!(a.size>5e6)){e.next=16;break}return A("\u753b\u50cf\u30b5\u30a4\u30ba\u304c\u5927\u304d\u3059\u304e\u307e\u3059\u3001\u5225\u306e\u753b\u50cf\u3092\u304a\u8a66\u3057\u304f\u3060\u3055\u3044"),N(!1),e.abrupt("return");case 16:return e.prev=16,e.next=19,S(a);case 19:if(s=e.sent,u(s),N(!1),1!==s.length){e.next=25;break}return e.next=25,D(s[0].faceId,0);case 25:0===s.length?A(U):A(T),e.next=33;break;case 28:e.prev=28,e.t0=e.catch(16),o=e.t0,!(j=o.response)||j.status>=500?A(L):A("".concat(J,"\n").concat(j.data.error.message)),N(!1);case 33:case"end":return e.stop()}}),e,null,[[16,28]])})));return function(t){return e.apply(this,arguments)}}();return Object(F.jsxs)(F.Fragment,{children:[a&&Object(F.jsx)(f.a,{item:!0,container:!0,children:Object(F.jsxs)(f.a,{item:!0,container:!0,direction:"row",children:[Object(F.jsx)(f.a,{item:!0,container:!0,xs:6,justify:"center",alignItems:"center",children:Object(F.jsxs)(f.a,{className:e.pictureContainer,item:!0,container:!0,children:[Object(F.jsx)("img",{ref:i,src:a,alt:"\u9078\u629e\u753b\u50cf",className:e.loaded}),j.map((function(e,t){return Object(F.jsx)("button",{onClick:function(){return D(e.faceId,t)},type:"button",style:{backgroundColor:"transparent",border:"2px solid ".concat((n=t,-1===W?"blue":n===W?"red":"white")),color:"transparent",cursor:"pointer",position:"absolute",padding:0,left:B(e,"left"),top:B(e,"top"),width:B(e,"width"),height:B(e,"height")},children:":"},e.faceId);var n}))]})}),Object(F.jsx)(f.a,{item:!0,container:!0,xs:6,justify:"center",alignItems:"center",className:e.rightGrid,children:k?Object(F.jsx)(w.a,{}):h.length>0?Object(F.jsx)("img",{className:e.studentPicture,src:"students/".concat(h[0].name,".jpg"),alt:"".concat(h[0].name)}):Object(F.jsx)(b.a,{className:e.message,children:q})})]})}),!a&&Object(F.jsx)(f.a,{item:!0,container:!0,justify:"center",children:Object(F.jsx)("img",{src:"camera_kao_ninshiki.png",alt:"\u9854\u8a8d\u8b58"})}),!h.length&&Object(F.jsx)(f.a,{item:!0,container:!0,justify:"center",children:Object(F.jsxs)(y.a,{variant:"contained",color:"primary",component:"label",disabled:k,children:[a?"\u5225\u306e\u753b\u50cf\u3092\u9078\u629e":"\u5224\u5b9a\u3057\u305f\u3044\u753b\u50cf\u3092\u9078\u629e",Object(F.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:E})]})}),h.length>0&&!k&&Object(F.jsxs)(F.Fragment,{children:[Object(F.jsx)(f.a,{item:!0,container:!0,justify:"center",children:Object(F.jsxs)(b.a,{children:["\u3053\u306e\u4eba\u7269\u306f ",Object(F.jsx)("b",{children:h[0].name})," ",h[0].confidence>=.65?"\u3067\u3059\uff01":"\u306b\u4f3c\u3066\u3044\u307e\u3059\uff01"]})}),Object(F.jsx)(f.a,{item:!0,container:!0,children:h.map((function(e){return Object(F.jsx)(f.a,{item:!0,container:!0,justify:"center",children:Object(F.jsxs)(b.a,{children:[e.name," ... \u305d\u3063\u304f\u308a\u5ea6"," ",(100*e.confidence).toFixed(1),"%"]})},e.name)}))}),Object(F.jsxs)(f.a,{item:!0,container:!0,direction:"row",justify:"center",spacing:2,children:[Object(F.jsx)(f.a,{item:!0,children:Object(F.jsxs)(y.a,{variant:"contained",color:"primary",component:"label",disabled:k,children:["\u5225\u306e\u753b\u50cf\u3067\u8a66\u3059",Object(F.jsx)("input",{type:"file",accept:"image/*",hidden:!0,onChange:E})]})}),Object(F.jsx)(f.a,{item:!0,children:Object(F.jsx)(R,{students:h})})]})]})]})},W=Object(j.a)({palette:{secondary:{main:"#00acee"}}}),G=Object(s.a)((function(){return Object(o.a)({title:{flexGrow:1},container:{padding:0},body:{padding:8}})})),T=function(){var e=G();return Object(F.jsx)(F.Fragment,{children:Object(F.jsxs)(u.a,{theme:W,children:[Object(F.jsx)(d.a,{position:"static",children:Object(F.jsx)(l.a,{variant:"dense",children:Object(F.jsx)(b.a,{variant:"h6",className:e.title,children:"\u3055\u304f\u3089\u5b66\u9662 \u9854\u8a3a\u65ad\uff08\u958b\u767a\u4e2d\uff09"})})}),Object(F.jsx)(h.a,{maxWidth:"md",className:e.container,children:Object(F.jsx)(p.a,{className:e.body,children:Object(F.jsxs)(f.a,{container:!0,spacing:2,children:[Object(F.jsxs)(f.a,{item:!0,children:[Object(F.jsxs)(b.a,{children:["\u753b\u50cf\u306b\u5199\u3063\u3066\u3044\u308b\u4eba\u304c\u3001\u3055\u304f\u3089\u5b66\u9662\u306e\u4e2d\u3067",Object(F.jsx)("b",{children:"\u3069\u306e\u751f\u5f92\u306b\u3069\u306e\u304f\u3089\u3044\u4f3c\u3066\u3044\u308b\u304b"}),"\u5224\u5b9a\u3059\u308b\u3088\uff01"]}),Object(F.jsxs)(b.a,{variant:"caption",children:["\u203b\u753b\u50cf\u306f\u5224\u5b9a\u306e\u305f\u3081",Object(F.jsx)(x.a,{href:"https://azure.microsoft.com/ja-jp/services/cognitive-services/face/#demo",target:"_blank",children:"Microsoft"}),"\u3078\u9001\u4fe1\u3055\u308c\u307e\u3059\u3001\u305d\u308c\u4ee5\u5916\u306b\u306f\u4f7f\u7528\u3055\u308c\u307e\u305b\u3093"]}),Object(F.jsx)("br",{}),Object(F.jsx)(b.a,{variant:"caption",children:"\u203b\u9854\u5168\u4f53\u304c\u6b63\u9762\u3092\u5411\u3044\u3066\u5199\u3063\u3066\u3044\u308b\u3068\u3001\u8a8d\u8b58\u3055\u308c\u3084\u3059\u3044\u3067\u3059"})]}),Object(F.jsx)(_,{}),Object(F.jsx)(f.a,{item:!0,container:!0,justify:"flex-end",children:Object(F.jsxs)(b.a,{variant:"caption",children:["\u958b\u767a\uff1a"," ",Object(F.jsx)(x.a,{href:"https://twitter.com/ryochan_metal",target:"_blank",children:"@ryochan_metal"})]})})]})})})]})})};i.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(T,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.ac6aa367.chunk.js.map